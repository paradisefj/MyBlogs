## Maven解析依赖的机制

当本地仓库没有依赖时，maven会自动从远程仓库下载；当依赖版本为快照版本时，Maven自动找到当前最新的快照。

1. 当依赖的范围为system时，maven直接从本地文件系统解析文件。
2. 根据依赖坐标计算仓库路径后，尝试直接从本地仓库寻找构件，如果发现相应的构件，则解析成功。
3. 本地仓库不存在构件的情况下，如果依赖版本是显示发布的版本，如1.1，2.1-beta等，则遍历所有的远程仓库，发现后，下载并解析使用。
4. 如果依赖版本是RELEASE或者LATEST,则基于**更新策略**读取所有远程仓库的元数据groupId/artifactId/version/maven-metadata.xml，将其与本地仓库的对应元数据合并后，计算出RELEASE或者LATEST的真实值，然后基于这个真实值检查本地和远程仓库，重复步骤2和3。
5. 如果最新的依赖版本是SNAPSHOT,则基于**更新策略**读取所有远程仓库的元数据groupId/artifactId/version/maven-metadata.xml，将其与本地仓库的对应元数据合并后，得到最新快照版本的值，然后基于该值检查本地仓库，或者从远程仓库下载。
6. 如果最后解析到的版本是时间戳格式的快照，如1.4.1-20091102.121450-121,则复制其时间戳格式的文件至非时间戳的格式，如SNAPSHOT，并使用该非时间戳格式的构建。


> 注：当依赖的版本不清晰的时候，如RELEASE、LATEST和SNAPSHOT，Maven就需要基于更新策略来检查更新。有一些配置项与此有关：<releases><enabled>和<snapshots><enabled>，只有仓库开启了对发布版本的控制时，才能访问该仓库的发布版本构件信息，对快照版本也同理；其次，要注意的是<release><snapshots>的子元素<updatePolicy>，该元素配置了检查更新的频率。